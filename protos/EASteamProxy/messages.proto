syntax = "proto3";

package eax.services.ipc;

import "google/protobuf/timestamp.proto";

message UpdateStatus {
    int32 status = 1;
}

message UpdateInformation {
    int32 updateType = 1;
    google.protobuf.Timestamp activationTime = 2;
    UpdateStatus updateStatus = 3;
}

message ContentInstallInfo {
    string offerId = 1;
    string softwareId = 2;
    string baseSlug = 3;
    
    ContentInstallState detailedState = 5;
    message ContentInstallState {
        int32 installStatus = 1;
        int32 previousInstallStatus = 2;
        uint32 installPhase = 3;
        int32 modifyType = 6;
    }
    
    string installCheck = 8;
    string executableCheck = 9;
    string baseInstallPath = 10;
    string dlcSubPath = 11;
    string installedVersion = 12;
    string installedLocale = 13;
    
    LocalInstallProperties localInstallProperties = 14;
    message LocalInstallProperties {
        string localManifestVersion = 1;
        repeated Launcher launchers = 2;
        bool useGameVersionFromManifest = 3;
    }
    
    LocalUninstallProperties localUninstallProperties = 15;
    message LocalUninstallProperties {
        string uninstallCommand = 1;
        string uninstallParameters = 2;
    }
    
    string contentManifestLaunchers = 16;
    string executablePath = 17;
    
    message Launcher {
        string exePath = 1;
        string cmdArgs = 2;
        bool isTimedTrial = 3;
        bool requires64BitOs = 4;
        bool executeElevated = 5;
    }
}

message CatalogIds {
    string offerId = 1;
    string softwareId = 2;
    string contentId = 3;
    string masterTitleId = 4;
    string multiplayerId = 5;
    string slug = 6;
    string achievementSetId = 7;
    repeated string masterTitleIds = 8;
    string baseGameSlug = 9;
}

message BuildMetadata {
    string version = 1;
    uint64 releaseDate = 2;
    bool isIgoEnabled = 3;
    bool enableDifferentialUpdate = 4;
    bool treatUpdatesAsMandatory = 5;
    bool valid = 6;
    bool enableVersionUpdate = 7;
}

message GameMilestones {
    int32 lifecycleType = 1;
    uint64 revealDate = 2;
    uint64 playableStartDate = 3;
    uint64 playableEndDate = 4;
    uint64 downloadStartDate = 5;
}

message CatalogDefinition {
    repeated string supportedLocales = 1;
    uint32 itemSubType = 2;
    string projectNumber = 3;
    uint32 minAge = 4;
    bool isIgoApiEnabled = 5;
    string igoBrowserDefaultUrl = 6;
    string gameLauncherUrl = 7;
    string gameLauncherUrlClientId = 8;
    string displayName = 9;
    string defaultInstallFolder = 10;
    string dipManifestRelativePath = 11;
    uint64 releaseDate = 12;
    string latestContentVersion = 16;
    bool isBaseGame = 17;
    bool isPDLC = 18;
    bool isPULC = 19;
    bool isFreeTrial = 20;
    int32 editionRank = 23;
    bool isCloudSaveSupported = 24;
    string saveFileCriteria = 25;
    uint64 revealDate = 26;
    string executePathOverride = 27;
    string installCheck = 28;
    string executeParameters = 30;
    bool monitorPlay = 31;
    bool isTimedTrial = 32;
    uint32 packageType = 33;
    uint64 downloadStartDate = 34;
    uint64 useEndDate = 35;
    uint64 subscriptionUnlockDate = 36;
    uint64 subscriptionUseEndDate = 37;
    BuildMetadata liveBuildMetadata = 38;
    BuildMetadata stagedBuildMetadata = 39;
    repeated GameMilestones milestones = 40;
}

message AnyCatalogId {
    int32 type = 1;
    string value = 2;
}

message OfferKey {
    string offerId = 1;
    uint32 externalType = 2;
}

message NucleusEntitlement {
    uint32 subscriptionStatusReason = 1;
    uint32 permission = 3;
    uint64 entId = 4;
    string entTag = 5;
    uint64 terminationDate = 6;
    string serialKey = 7;
    int64 trialTimeRemainingSeconds = 8;
    bool isPreOrder = 9;
    bool isEntitledFromSubscription = 10;
    uint32 externalType = 11;
    uint32 entitlementSource = 12;
}

message ContentVersionStatus {
    bool installed = 1;
    bool updateRequired = 2;
    bool updateAvailable = 3;
}

message Entitlement {
    CatalogIds catalogIds = 1;
    CatalogDefinition catalogDef = 2;
    NucleusEntitlement nucleusEntitlement = 3;
    ContentVersionStatus contentVersionStatus = 4;
    repeated string parentEntitlements = 5;
    repeated string childEntitlements = 6;
}

message GameStatusInfo {
    ContentInstallInfo contentInstallInfo = 1;
    Entitlement entitlement = 2;
    bool isGameRunning = 3;
}

message AuthInfo {
    bool authenticated = 1;
    bool isInvisible = 2;
    string accessToken = 3;
    string authCode = 4;
    string sessionId = 5;
    string offlineKey = 6;
    uint64 expiresInMs = 7;
}

message PersonaeInfo {
    string nucleusId = 1;
    string eaPersonaId = 2;
    string correlationId = 3;
    uint32 subscriptionStatus = 4;
    uint32 subscriptionLevel = 5;
    uint64 subscriptionEndTime = 6;
    string geoCountry = 7;
    uint32 reason = 8;
}

message GameRunStatus {
    string masterTitleId = 1;
    OfferKey offerKey = 2;
    uint32 gameRunState = 3;
    string slug = 4;
    uint32 gameErrorCode = 5;
    uint32 processId = 6;
    uint32 threadId = 7;
    uint32 exitCode = 8;
}

message GepGameEnvironmentData {
    string nucleusToken = 1;
    string authCode = 2;
    string serialKey = 3;
    string rtpCode = 4;
    string sessionKey = 5;
    string gameLocale = 6;
    string environment = 7;
    string eaId = 8;
    string contentId = 9;
    OfferKey offerKey = 10;
    bool freeTrial = 11;
    bool offlineMode = 12;
    bool requireAllowVms = 13;
    string igoLogDirPath = 14;
    string igoCacheDirPath = 15;
    string gameSessionId = 16;
    uint32 lsxPort = 17;
    string steamAppId = 18;
    uint32 steamProxyIpcPort = 19;
    uint32 egsProxyIpcPort = 20;
}

message ClientAutoUpdateValuesUpdatedReq {
    bool automaticClientUpdatesEnabled = 1;
}

message ClientAutoUpdateValuesUpdatedResp {
    
}

message MachineSettingUpdateReq {
    string key = 1;
    string newValue = 2;
}

message MachineSettingUpdateResp {
    
}

message ReconcileSystemConfigReq {
    int32 configTypesToRefresh = 2;
}

message ReconcileSystemConfigResp {
    bool succeeded = 1;
}

message ClearAppCacheReq {
    
}

message ClearAppCacheResp {
    
}

message UserActivityReq {
    
}

message UserActivityResp {
    
}

message ReloadOverridesCfgReq {
    
}

message ReloadOverridesCfgResp {
    
}

message UserHighEngagementReq {
    
}

message UserHighEngagementResp {
    
}

message CheckClientRunningReq {
    
}

message CheckClientRunningResp {
    bool running = 1;
}

message CheckUpdateInformationReq {
    bool wakeFromIdle = 1;
}

message CheckUpdateInformationResp {
    UpdateInformation updateInfo = 1;
}

message CheckVersionReq {
    
}

message CheckVersionResp {
    string version = 1;
    string location = 2;
    string environment = 3;
}

message NotifyProcessIdReq {
    uint32 processId = 1;
}

message NotifyProcessIdResp {
    
}

message NotifyLsxPortReq {
    uint32 lsxPort = 1;
}

message NotifyLsxPortResp {
    
}

message AcceptUpdateReq {
    
}

message AcceptUpdateResp {
    
}

message PauseUpdateReq {
    
}

message PauseUpdateResp {
    
}

message ManualOfflineStatusChangedReq {
    bool goOffline = 1;
}

message ManualOfflineStatusChangedResp {
    
}

message NotifyAuthInfoReq {
    AuthInfo authInfo = 1;
    uint32 reason = 2;
}

message NotifyAuthInfoResp {
    
}

message RefreshAuthNotif {
    
}

message NotifyUserInfoChangedReq {
    AuthInfo authInfo = 1;
    PersonaeInfo personaeInfo = 2;
}

message NotifyUserInfoChangedResp {
    
}

message InstallConfigUpdatedReq {
    bool automaticContentUpdates = 1;
    bool continuedContentInstalls = 2;
    int64 throttleBandwidthKbPerSecond = 3;
}

message InstallConfigUpdatedResp {
    
}

message RefreshInstallStateReq {
    repeated string softwareIds = 1;
}

message RefreshInstallStateResp {
    
}

message RefreshInstallStateCompletedNotif {
    repeated string softwareIds = 1;
    bool installStateChanged = 2;
}

message InstallContentReq {
    string data = 10;
}

message InstallContentResp {
    
}

message RefreshInstallLocaleReq {
    repeated string softwareIds = 1;
}

message RefreshInstallLocaleResp {
    
}

message ContentControlReq {
    uint32 contentControlType = 1;
    repeated string offerIds = 2;
    string slug = 3;
}

message ContentControlResp {
    
}

message ContentUninstallReq {
    string slug = 1;
    string offerId = 2;
    bool silent = 3;
    RequestData requestData = 4;
}

message ContentUninstallResp {
    
}

message DumpVerboseLogsReq {
    
}

message DumpVerboseLogsResp {
    
}

message UpdateContentReq {
    string data = 5;
}

message UpdateContentResp {
    
}

message RepairContentReq {
    string data = 4;
}

message RepairContentResp {
    
}

message CheckGameInstalledReq {
    string offerId = 1;
}

message CheckGameInstalledResp {
    
}

message ReloadEntitlementsReq {
    uint32 trigger = 1;
    bool forceRefreshExternalEntitlements = 2;
}

message ReloadEntitlementsResp {
    
}

message TrialTimeUpdatedReq {
    OfferKey offerKey = 1;
    string contentId = 2;
    int64 remainingMinutes = 3;
    bool gameExited = 4;
}

message TrialTimeUpdatedResp {
    
}

message NotifyGameRunStatusReq {
    GameRunStatus gameRunStatus = 1;
}

message NotifyGameRunStatusResp {
    
}

message NotifyChangeSplashVisibilityReq {
    uint32 type = 1;
}

message NotifyChangeSplashVisibilityResp {
    
}

message LaunchElevatedGameReq {
    string masterTitleId = 1;
    OfferKey offerKey = 2;
    string workingDirectory = 3;
    GepGameEnvironmentData gameEnvironmentData = 4;
    string cmdParams = 5;
}

message LaunchElevatedGameResp {
    string masterTitleId = 1;
    uint64 token = 2;
    int32 gameErrorCode = 3;
}

message ResumeElevatedGameReq {
    uint64 token = 1;
}

message ResumeElevatedGameResp {
    
}

message ElevatedLaunchInfoReq {
    uint32 port = 1;
}

message ElevatedLaunchInfoResp {
    string contentId = 1;
    OfferKey offerKey = 2;
    string masterTitleId = 3;
    string execPath = 4;
    string cmdArgs = 5;
    uint64 token = 6;
    bool igoInjectionRequired = 7;
}

message GameStatusInfoReq {
    string masterTitleId = 1;
    repeated string offerIds = 2;
}

message GameStatusInfoResp {
    repeated GameStatusInfo statusInfos = 1;
}

message SpaNavigationReq {
    uint32 destination = 1;
}

message SpaNavigationResp {
    
}

message GepReadyNotif {
    uint64 token = 1;
    string masterTitleId = 2;
    uint32 port = 3;
    uint32 gameErrorCode = 4;
}

message ContentReadyNotif {
    
}

message ContentUpdatedNotif {
    uint32 partIndex = 1;
    uint32 contentLength = 2;
    repeated OfferKey offerKeys = 3;
    string serializedContent = 4;
}

message InstallUpdatedNotif {
    repeated OfferKey offerKeys = 1;
    repeated ContentInstallInfo installInfos = 2;
    repeated string softwareIds = 3;
}

message BaseGameUpdatedNotif {
    repeated ContentInstallInfo installInfos = 1;
}

message GameStartedSuspendedNotif {
    GameRunStatus gameRunStatus = 3;
}

message GameResumedNotif {
    GameRunStatus gameRunStatus = 1;
}

message GameRunStatusNotif {
    GameRunStatus gameRunStatus = 1;
}

message ChangeSplashVisibilityNotif {
    uint32 type = 1;
}

message InstallQueueUpdatedNotif {
    string data = 2;
}

message ExternalActionNotif {
    
}

message UpdaterDownloadProgNotif {
    int64 bytesReceived = 1;
    int64 bytesTotal = 2;
}

message UpdaterStepCompleteNotif {
    int32 step = 1;
    UpdateStatus updateStatus = 2;
}

message UpdateNotif {
    UpdateInformation updateInfo = 1;
}

message ModifyContentProgressNotif {
    string offerId = 1;
    string slug = 2;
    int32 phase = 3;
    float percent = 4;
    uint64 numerator = 5;
    uint64 denominator = 6;
    float bandwidthBps = 7;
    float timeRemainingSeconds = 8;
}

message InsertDiskNotif {
    string offerId = 1;
    string slug = 2;
    uint32 diskNo = 3;
}

message TelemetryEventNotif {
    string data = 9;
}

message DownloadStatusNotif {
    repeated DownloadStatusInfo downloadStatus = 1;
    message DownloadStatusInfo {
        string offerId = 1;
        string slug = 2;
        int32 downloadStatus = 3;
    }
}

message DownloadStateCleanedNotif {
    string offerId = 1;
}

message InstallCompletedNotif {
    string offerId = 1;
    bool groupFinished = 2;
    bool groupHasBaseGame = 3;
}

message ModifyContentErrorData {
    oneof errorData {
        DiskFull diskFull = 1;
        SharingViolation sharingViolation = 2;
        WrongDiskInserted wrongDiskInserted = 3;
    }
    
    message DiskFull {
        uint64 diskSpaceRequired = 1;
        uint64 diskSpaceAvailable = 2;
        uint64 diskSpaceAllocated = 3;
    }
    
    message SharingViolation {
        string lockingProcess = 1;
    }
    
    message WrongDiskInserted {
        uint32 expectingDiskNo = 1;
    }
}

message InstallErrorOccurredNotif {
    OfferKey offerKey = 1;
    string slug = 2;
    uint32 errorCategory = 3;
    uint32 errorCode = 4;
    string extraContext = 5;
    string errorDetail = 6;
    ModifyContentErrorData errorData = 7;
}

message GeneralErrorMessageNotif {
    string errorMsg = 1;
}

message ClearInstallFinishListReq {
    
}

message ClearInstallFinishListResp {
    
}

message FocusMainWindowNotif {
    
}

message InstallQueueReadinessNotif {
    bool ready = 1;
}

message AuthInfoUpdateNotif {
    AuthInfo authInfo = 1;
}

message InstallStatusInfoReq {
    
}

message InstallStatusInfoResp {
    repeated ContentInstallInfo installInfos = 1;
    
    repeated CatalogInfo catalogInfos = 2;
    message CatalogInfo {
        string softwareId = 1;
        CatalogDefinition catalogDef = 2;
    }
}

message ExternalUserInfo {
    string authCode = 1;
    string idToken = 2;
    string nucleusId = 3;
    bool shouldRefreshSPA = 4;
}

message ExternalAction {
    uint32 type = 1;
    ExternalUserInfo userInfo = 2;
    OfferKey offerKey = 4;
    string slug = 5;
    RequestData requestData = 6;
    string cmdParams = 7;
    string launchHelperArgument = 8;
    string externalAppId = 9;
    string platform = 10;
    repeated AnyCatalogId anyCatalogIds = 11;
}

message PushExternalActionReq {
    ExternalAction externalAction = 1;
}

message PushExternalActionResp {
    
}

message PopExternalActionReq {
    
}

message PopExternalActionResp {
    ExternalAction externalAction = 1;
    bool moreActions = 2;
}

message CancelInstallGameReq {
    string slug = 1;
}

message CancelInstallGameResp {
    
}

message InstallGameReq {
    ExternalUserInfo userInfo = 1;
    string gameSlug = 2;
    RequestData requestData = 3;
}

message InstallGameResp {
    
}

message PauseInstallGameReq {
    string slug = 1;
}

message PauseInstallGameResp {
    
}

message ResumeInstallGameReq {
    string slug = 1;
}

message ResumeInstallGameResp {
    
}

message UninstallGameReq {
    ExternalUserInfo userInfo = 1;
    string slug = 2;
    RequestData requestData = 3;
}

message UninstallGameResp {
    
}

message RequestData {
    uint32 requestSource = 1;
    uint32 requestOwner = 2;
    int64 param1 = 3;
    string param2 = 4;
    uint64 requestTimestamp = 5;
}

message LaunchGameReq {
    ExternalUserInfo userInfo = 1;
    OfferKey offerKey = 2;
    RequestData requestData = 3;
    string cmdParams = 4;
    string slug = 5;
    string offerId = 6;
    string launchHelperArgument = 7;
}

message LaunchGameResp {
    bool requestAccepted = 1;
}

message LaunchClientReq {
    ExternalUserInfo userInfo = 1;
}

message LaunchClientResp {
    
}

message ContentUninstallStatusNotif {
    string offerId = 1;
    uint32 uninstallState = 2;
}

message ContentUninstallStatusNotifResp {
    
}

message SuiteShutdownNotif {
    
}

message GrantAchievementNotif {
    string achievementId = 1;
    uint32 progress = 2;
}

message GetUserAchievementsReq {
    string offerId = 1;
}

message GetUserAchievementsResp {
    repeated GrantAchievementNotif achievements = 1;
}

message GetEpicAccessTokenReq {
    
}

message GetEpicAccessTokenResp {
    string accessToken = 1;
    uint64 expiresAtS = 2;
}

message SteamOverlayToStoreNotif {
    string appId = 1;
    string offerId = 2;
    bool isBaseGame = 3;
    uint32 flag = 4;
}

message SteamPurchaseConfirmationReq {
    uint64 orderId = 1;
    bool isAuthorized = 2;
}

message SteamPurchaseConfirmationResp {
    
}

message SetSteamLocaleReq {
    string locale = 1;
}

message SetSteamLocaleResp {
    
}

message NotifySteamOverlayStateReq {
    bool isActive = 1;
}

message NotifySteamOverlayStateResp {
    
}

message StartCloudSyncReq {
    OfferKey offerKey = 1;
    uint32 syncType = 2;
    uint32 requestOwner = 3;
}

message StartCloudSyncResp {
    string offerId = 1;
    bool success = 2;
}

message RestorePrivilegedBackupReq {
    string offerId = 1;
    string nucleusId = 2;
    string entitlementId = 3;
}

message RestorePrivilegedBackupResp {
    string offerId = 1;
    bool isRestoreStarted = 2;
}

message PrivilegedBackupRestoredNotif {
    string offerId = 1;
    int32 result = 2;
}

message CloudSyncStatusNotif {
    string cloudId = 1;
    uint32 syncStatus = 2;
    uint64 localDataTimestamp = 3;
    uint64 remoteDataTimestamp = 4;
}

message ResolveCloudSyncConflictReq {
    string cloudId = 1;
    uint32 resolution = 2;
}

message ResolveCloudSyncConflictResp {
    
}

message GameLaunchPending {
    string gameLaunchArgument = 1;
}

message GameLaunchPendingResp {
    
}

message Link2EAReq {
    ExternalUserInfo userInfo = 1;
    string externalAppId = 2;
    RequestData requestData = 3;
    string cmdParams = 4;
    string launchHelperArgument = 5;
    string platform = 6;
}

message Link2EAResp {
    
}

message Link2EAPendingRequest {
    string launchHelperArgument = 1;
}

message Link2EAPendingRequestResp {
    
}

message ClearLink2EAPendingRequest {
    bool requestCameFromLink2Ea = 1;
}

message ClearLink2EAPendingRequestResp {
    
}

message ClearLink2EAPendingNotif {
    
}

message ProfilerControlReq {
    bool setActive = 1;
}

message ProfilerControlResp {
    
}

message RefreshExtEntitlementsNotif {
    string responseBody = 1;
    uint32 responseStatus = 2;
    int32 entitlementLoadTrigger = 3;
}
